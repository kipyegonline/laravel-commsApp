_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{"7SZd":function(e,t,a){"use strict";var n=a("wx14"),o=a("Ff2n"),s=a("q1tI"),r=(a("17x9"),a("iuhU")),i=a("ofer"),l=a("H2TA"),c=a("4hqb"),u=s.forwardRef((function(e,t){var a=e.children,l=e.classes,u=e.className,d=e.component,f=void 0===d?"div":d,p=e.disablePointerEvents,h=void 0!==p&&p,g=e.disableTypography,m=void 0!==g&&g,v=e.position,b=e.variant,E=Object(o.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),S=Object(c.b)()||{},w=b;return b&&S.variant,S&&!w&&(w=S.variant),s.createElement(c.a.Provider,{value:null},s.createElement(f,Object(n.a)({className:Object(r.a)(l.root,u,h&&l.disablePointerEvents,S.hiddenLabel&&l.hiddenLabel,"filled"===w&&l.filled,{start:l.positionStart,end:l.positionEnd}[v],"dense"===S.margin&&l.marginDense),ref:t},E),"string"!==typeof a||m?a:s.createElement(i.a,{color:"textSecondary"},a)))}));t.a=Object(l.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(u)},GOMq:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts",function(){return a("PJ8K")}])},OXHv:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a("aJdC"),o=function(e){return{type:n.a.ADD_POSTS,payload:e}},s=function(e){return{type:n.a.SET_TICKS,payload:e}}},PJ8K:function(e,t,a){"use strict";a.r(t);var n=a("ODXe"),o=a("q1tI"),s=a.n(o),r=a("ZiQX"),i=a("/MKj"),l=a("vDqi"),c=a.n(l),u=a("tRbT"),d=a("wb2y"),f=a("iae6"),p=a("OXHv"),h=a("5jqn"),g=a("lMTm"),m=a("L6Je"),v=a("wx14"),b=a("MX0m"),E=a.n(b),S=a("nOHt"),w=a.n(S),y=(a("YFqc"),a("bSwy")),N=a.n(y),T=a("f+F2"),_=a.n(T),O=a("nCZa"),D=a("/EAt"),C=a("Imu7"),A=a("sRsu"),M=a("3PeG"),P=a("Uf6+"),I=a("Z3vd"),j=a("30+C"),L=a("o4QW"),k=a("NrVZ"),x=a("r9w1"),R=a("ADg1"),q=a("1AYd"),z=a("pdwK"),K=a("Spdj"),U=a("ofer"),V=a("7SZd"),F=a("l1im"),G=a("t6oH"),H=s.a.createElement,J=20;var X=function(e){var t=e.id,a=e.index,n=void 0===a?"":a,o=e.clientName,s=void 0===o?"":o,r=e.clientPhone,i=void 0===r?"":r,l=e.clientEmail,c=void 0===l?"":l,u=e.clientOrg,d=void 0===u?"":u,f=(e.message,e.handler),p=void 0===f?"":f,h=e.issue,g=void 0===h?"":h,m=e.handler_id,v=void 0===m?0:m,b=e.subject,E=void 0===b?"":b,S=(e.clientDept,e.addedBy),y=void 0===S?"":S,N=e.status,T=void 0===N?"":N,O=e.adder,D=void 0===O?"":O,C=e.altId,P=void 0===C?"":C,j=e.addedon,L=void 0===j?"":j,k=e.seen,x=void 0===k?"0":k,R=e.setTicks,q=void 0===R?function(e){return e}:R,z=function(e){return Boolean(Number(e))?Number(e)>1?["bg-success","Resolved"]:["bg-info","In-progress"]:["bg-warning","Pending"]};return H(A.a,null,H(M.a,null,n+1,H(_.a,{color:Boolean(Number(x))?"secondary":"inherit"})," "),H(M.a,null,s),H(M.a,null,i," ",H("br",null),H("small",null,c)),H(M.a,null,d),H(M.a,null,g),H(M.a,null,E),H(M.a,null,H("b",null,+v===J?"You":p," ")),H(M.a,null,H(I.a,{className:"".concat(z(T)[0]," text-white"),size:"small"},z(T)[1])),H(M.a,null,L),H(M.a,null,H("b",null,+v===J||D===J?"You":y," ")),H(M.a,null,H(I.a,{variant:"contained",color:"secondary",target:"_blank",onClick:function(){return function(e,t,a,n){J===+v&&0===x&&q(e),a.split(" ").join("-"),w.a.push("/post/".concat(t),void 0,{shallow:!1})}(t,P,E)}},"Details")))},Z=s.a.memo(X,(function(e,t){return e.id===t.id})),B=function(e){var t=e.posts,a=void 0===t?[]:t,o=e.setTicks,r=void 0===o?function(e){return e}:o,i=a.length>=10?10:a.length,l=Math.ceil(a.length/i),c=s.a.useState(0),u=Object(n.a)(c,2),d=u[0],f=u[1],p=d*i,h=d*i+i;return H(s.a.Fragment,null,H($,{posts:a.length}),H(O.a,{className:"table-responsive"},H(D.a,{className:"table"},H(C.a,null,H(A.a,null,H(M.a,{component:"th",scope:"row",className:"thead"},"#"),H(M.a,{scope:"row",className:"thead bg-light"},"Name"),H(M.a,{scope:"row",className:"thead bg-light"},"Contacts"),H(M.a,{scope:"row",className:"thead bg-light"},"Organisation"),H(M.a,{scope:"row",className:"thead bg-light"},"Issue"),H(M.a,{scope:"row",className:"thead bg-light"},"Subject"),H(M.a,{scope:"row",className:"thead bg-light"},"Handler"),H(M.a,{scope:"row",className:"thead bg-light"},"Status"),H(M.a,{scope:"row",className:"thead bg-light"},"Added on"),H(M.a,{scope:"row",className:"thead bg-light"},"Added By"),H(M.a,{scope:"row",className:"thead bg-light"},"Details"))),H(P.a,null,a.slice(p,h).map((function(e,t){return H(Z,Object(v.a)({key:e.id},e,{setTicks:r,index:t}))})))),H(E.a,{id:"4047313646"},[".thead.jsx-4047313646{font-weight:bold;color:red;}"])),H(F.a,{color:"primary",rounded:!0,count:l,defaultPage:d+1,size:"large",onChange:function(e,t){f(t-1)}}))},Y=function(e){var t=e.sendGroup,a=void 0===t?function(e){return e}:t,n=e.issues,o=void 0===n?[]:n,s=e.setIssue,r=void 0===s?function(e){return e}:s,i=e.issue,l=void 0===i?string:i,c=e.users,d=void 0===c?[]:c,f=e.user,p=void 0===f?{}:f,h=e.getUser,g=void 0===h?function(e){return e}:h,m=e.handleSearch,v=void 0===m?function(e){return e}:m,b=e.getDate,E=void 0===b?function(e){return e}:b;return H(u.a,{container:!0,justify:"space-evenly",alignItems:"center",wrap:"wrap",className:"my-2 p-2"},H(u.a,{item:!0,grow:3},H(j.a,null,"Search",H(Q,{sendValue:v}))),H(u.a,{item:!0},H(j.a,null,H("p",null,"View by resolution stages"),H(L.a,null,H(k.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},H(I.a,{onClick:function(){return a(0)},className:"bg-warning"},"Pending"),H(I.a,{className:"bg-info mx-2",onClick:function(){return a(1)}},"In-progress"," "),H(I.a,{className:"bg-success",onClick:function(){return a(2)}},"Resolved"))))),H(u.a,{item:!0},H("p",null,"View by issues"),H(G.d,{issues:o,getIssue:r,issue:l})),H(u.a,{item:!0},H("p",null," View By days"),H(x.a,{type:"date",onChange:function(e){return E(e.target.value)}})),H(u.a,{item:!0},H("p",null," view by Colleagues "),H(G.a,{users:d,getUser:g,user:p})))},Q=function(e){var t=e.sendValue,a=void 0===t?function(e){return e}:t,o=s.a.useState(""),r=Object(n.a)(o,2),i=r[0],l=r[1],c=function(e){e.preventDefault(),i.trim().length>0&&a(i)};return H("form",{className:"form w-100",noValidate:!0,autoComplete:"off",onSubmit:c},H(R.a,null,H(q.a,{htmlFor:"search-post"},"Search name,email,phone"),H(z.a,{error:!0,type:"search",id:"search-post",label:"Outlined",variant:"outlined",autoFocus:!0,onChange:function(e){return l(e.target.value)},endAdornment:H(V.a,{position:"end"},H(N.a,{size:"large",style:{cursor:"pointer"},onClick:c})),"aria-describedby":"standard-weight-helper-text",inputProps:{"aria-label":"search"}}),H(K.a,null,"Search anything")))},$=function(e){var t=e.posts;return H(U.a,null,t," ",t>1?"issues":"issue")},W=s.a.createElement;t.default=function(){var e,t=s.a.useState(""),a=Object(n.a)(t,2),o=a[0],l=a[1],v=s.a.useState(!1),b=Object(n.a)(v,2),E=b[0],S=b[1],w=s.a.useState(""),y=Object(n.a)(w,2),N=y[0],T=y[1],_=s.a.useState(""),O=Object(n.a)(_,2),D=O[0],C=O[1],A=s.a.useState(0),M=Object(n.a)(A,2),P=(M[0],M[1],Object(i.b)()),I=20,j=5,L=Object(i.c)((function(e){return{posts:e.posts.posts,issues:e.issues.deptIssues,users:e.users.userdepts}})),k=L.posts,x=L.issues,R=L.users,q=function(e){S(!0),c.a.get("/posts/".concat(e)).then((function(e){if(!e.data.length||!Array.isArray(e.data))throw new Error("No data found");P(p.a(e.data))})).catch((function(e){l("Something went wrong...".concat(e.message))})).finally((function(){S(!1)}))},z=function(t,a){S(!0),clearTimeout(e),c.a.get(t).then((function(e){if(!(null===e||void 0===e?void 0:e.data.length)||!Array.isArray(e.data))throw new Error("No data found");var t=e.data;P(a(t))})).catch((function(t){l("Error: "+t.message),e=setTimeout((function(){o.length&&q(I),l(""),console.log("callbaak",o.length)}),5e3)})).finally((function(){S(!1)}))},K=function(e){c.a.get("/posts/issues/".concat(e,"/").concat(I)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");P(g.a(e.data))})).catch((function(e){return console.error("fetch posts:",e)}))};return s.a.useEffect((function(){var e;k.length&&x.length&&R.length||Promise.all([q(I),(e=j,void c.a.get("/posts/deptusers/".concat(e,"/").concat(I)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");var t=e.data;P(h.b(t))})).catch((function(e){return console.error("fetch posts:",e)})).finally((function(){return console.log("finally")}))),K(j)])}),[]),W(m.a,null,W(u.a,{container:!0},W(Y,{sendGroup:function(e){var t="/posts/btngroup/".concat(e,"/").concat(I);z(t,p.a)},issues:x,issue:N,setIssue:function(e){T(e);var t="/posts/fetchdeptIssues/".concat(e,"/").concat(I);z(t,p.a)},users:R,user:D,getUser:function(e){C(e);var t="/posts/fetchdeptusers/".concat(e,"/").concat(I);z(t,p.a)},handleSearch:function(e){var t="/posts/search/".concat(e,"/").concat(I);z(t,p.a)},getDate:function(e){var t="/posts/fetchdates/".concat(e,"/").concat(I);z(t,p.a)}}),W(d.a,null),k.length?W(s.a.Fragment,null,W(B,{posts:k,setTicks:function(e){P(p.b(e)),c.a.get("/posts/setticks/".concat(e,"/").concat(I)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log("ticks",e)}))}})):E?W("div",{className:"text-center mx-auto my-4 p-4"},W(f.a,{size:"3rem"})):W(r.a,{severity:"error",className:"text-center my-1 mx-auto w-50 p-1"}," ",o)))}},aJdC:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={ADD_POSTS:"ADD_POSTS",ADD_POST:"ADD_POST",SELECTED_USER:"SELECTED_USER",SET_TICKS:"SET_TICKS",GET_POST:"GET_POST",ADD_COMMENT:"ADD_COMMENT",DELETE_COMMENT:"DELETE_COMMENT",ADD_COMMENTS:"ADD_COMMENTS",ADD_RECENT_POSTS:"ADD_RECENT_POSTS",EDITED_COMMENT:"EDITED_COMMENT",RESOLVE_ISSUE:"RESOLVE_ISSUE",RECENT_CLICKED:"RECENT_CLICKED"}},bSwy:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),s=(0,n(a("8/g6")).default)(o.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=s},"f+F2":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),s=(0,n(a("8/g6")).default)(o.default.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.default=s}},[["GOMq",0,1,2,3,4,5,6,7,9,8,11,13]]]);