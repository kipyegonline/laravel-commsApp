_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"7SZd":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),o=a("q1tI"),i=(a("17x9"),a("iuhU")),s=a("ofer"),c=a("H2TA"),l=a("4hqb"),u=o.forwardRef((function(e,t){var a=e.children,c=e.classes,u=e.className,d=e.component,f=void 0===d?"div":d,p=e.disablePointerEvents,h=void 0!==p&&p,m=e.disableTypography,g=void 0!==m&&m,v=e.position,E=e.variant,b=Object(r.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),y=Object(l.b)()||{},S=E;return E&&y.variant,y&&!S&&(S=y.variant),o.createElement(l.a.Provider,{value:null},o.createElement(f,Object(n.a)({className:Object(i.a)(c.root,u,h&&c.disablePointerEvents,y.hiddenLabel&&c.hiddenLabel,"filled"===S&&c.filled,{start:c.positionStart,end:c.positionEnd}[v],"dense"===y.margin&&c.marginDense),ref:t},b),"string"!==typeof a||g?a:o.createElement(s.a,{color:"textSecondary"},a)))}));t.a=Object(c.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(u)},GOMq:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts",function(){return a("PJ8K")}])},OXHv:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"k",(function(){return i})),a.d(t,"j",(function(){return s})),a.d(t,"h",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return f})),a.d(t,"f",(function(){return p})),a.d(t,"i",(function(){return h}));var n=a("aJdC"),r=function(e){return{type:n.a.ADD_POSTS,payload:e}},o=function(e){return{type:n.a.ADD_POST,payload:e}},i=function(e){return{type:n.a.SET_TICKS,payload:e}},s=function(e){return{type:n.a.RESOLVE_ISSUE,payload:e}},c=function(e){return{type:n.a.GET_POST,payload:e}},l=function(e){return{type:n.a.ADD_COMMENT,payload:e}},u=function(e){return{type:n.a.EDITED_COMMENT,payload:e}},d=function(e){return{type:n.a.DELETE_COMMENT,payload:e}},f=function(e){return{type:n.a.ADD_COMMENTS,payload:e}},p=function(e){return{type:n.a.ADD_RECENT_POSTS,payload:e}},h=function(e){return{type:n.a.RECENT_CLICKED,payload:e}}},PJ8K:function(e,t,a){"use strict";a.r(t);var n=a("ODXe"),r=a("q1tI"),o=a.n(r),i=a("ZiQX"),s=a("/MKj"),c=a("vDqi"),l=a.n(c),u=a("tRbT"),d=a("wb2y"),f=a("iae6"),p=a("OXHv"),h=a("5jqn"),m=a("lMTm"),g=a("L6Je"),v=a("wx14"),E=a("MX0m"),b=a.n(E),y=a("nOHt"),S=a.n(y),D=(a("YFqc"),a("bSwy")),N=a.n(D),T=a("f+F2"),O=a.n(T),w=a("nCZa"),_=a("/EAt"),C=a("Imu7"),k=a("sRsu"),M=a("3PeG"),x=a("Uf6+"),j=a("Z3vd"),P=a("30+C"),A=a("o4QW"),I=a("NrVZ"),L=a("r9w1"),R=a("ADg1"),q=a("1AYd"),F=a("pdwK"),z=a("Spdj"),U=a("ofer"),K=a("7SZd"),V=a("l1im"),G=a("t6oH"),H=o.a.createElement,J=20;var X=function(e){var t=e.id,a=e.index,n=void 0===a?"":a,r=e.clientName,o=void 0===r?"":r,i=e.clientPhone,s=void 0===i?"":i,c=e.clientEmail,l=void 0===c?"":c,u=e.clientOrg,d=void 0===u?"":u,f=(e.message,e.handler),p=void 0===f?"":f,h=e.issue,m=void 0===h?"":h,g=e.handler_id,v=void 0===g?0:g,E=e.subject,b=void 0===E?"":E,y=(e.clientDept,e.addedBy),D=void 0===y?"":y,N=e.status,T=void 0===N?"":N,w=e.adder,_=void 0===w?"":w,C=e.altId,x=void 0===C?"":C,P=e.addedon,A=void 0===P?"":P,I=e.seen,L=void 0===I?"0":I,R=e.setTicks,q=void 0===R?function(e){return e}:R,F=function(e){return Boolean(Number(e))?Number(e)>1?["bg-success","Resolved"]:["bg-info","In-progress"]:["bg-warning","Pending"]};return H(k.a,null,H(M.a,null,n+1,H(O.a,{color:Boolean(Number(L))?"secondary":"inherit"})," "),H(M.a,null,o),H(M.a,null,s," ",H("br",null),H("small",null,l)),H(M.a,null,d),H(M.a,null,m),H(M.a,null,b),H(M.a,null,H("b",null,+v===J?"You":p," ")),H(M.a,null,H(j.a,{className:"".concat(F(T)[0]," text-white"),size:"small"},F(T)[1])),H(M.a,null,A),H(M.a,null,H("b",null,+v===J||_===J?"You":D," ")),H(M.a,null,H(j.a,{variant:"contained",color:"secondary",target:"_blank",onClick:function(){return function(e,t,a,n){J===+v&&0===L&&q(e),a.split(" ").join("-"),S.a.push("/post/".concat(t),void 0,{shallow:!1})}(t,x,b)}},"Details")))},B=o.a.memo(X,(function(e,t){return e.id===t.id})),Z=function(e){var t=e.posts,a=void 0===t?[]:t,r=e.setTicks,i=void 0===r?function(e){return e}:r,s=a.length>=10?10:a.length,c=Math.ceil(a.length/s),l=o.a.useState(0),u=Object(n.a)(l,2),d=u[0],f=u[1],p=d*s,h=d*s+s;return H(o.a.Fragment,null,H(Q,{posts:a.length}),H(w.a,{className:"table-responsive"},H(_.a,{className:"table"},H(C.a,null,H(k.a,null,H(M.a,{component:"th",scope:"row",className:"thead"},"#"),H(M.a,{scope:"row",className:"thead bg-light"},"Name"),H(M.a,{scope:"row",className:"thead bg-light"},"Contacts"),H(M.a,{scope:"row",className:"thead bg-light"},"Organisation"),H(M.a,{scope:"row",className:"thead bg-light"},"Issue"),H(M.a,{scope:"row",className:"thead bg-light"},"Subject"),H(M.a,{scope:"row",className:"thead bg-light"},"Handler"),H(M.a,{scope:"row",className:"thead bg-light"},"Status"),H(M.a,{scope:"row",className:"thead bg-light"},"Added on"),H(M.a,{scope:"row",className:"thead bg-light"},"Added By"),H(M.a,{scope:"row",className:"thead bg-light"},"Details"))),H(x.a,null,a.slice(p,h).map((function(e,t){return H(B,Object(v.a)({key:e.id},e,{setTicks:i,index:t}))})))),H(b.a,{id:"4047313646"},[".thead.jsx-4047313646{font-weight:bold;color:red;}"])),H(V.a,{color:"primary",rounded:!0,count:c,defaultPage:d+1,size:"large",onChange:function(e,t){f(t-1)}}))},Y=function(e){var t=e.sendGroup,a=void 0===t?function(e){return e}:t,n=e.issues,r=void 0===n?[]:n,o=e.setIssue,i=void 0===o?function(e){return e}:o,s=e.issue,c=void 0===s?string:s,l=e.users,d=void 0===l?[]:l,f=e.user,p=void 0===f?{}:f,h=e.getUser,m=void 0===h?function(e){return e}:h,g=e.handleSearch,v=void 0===g?function(e){return e}:g,E=e.getDate,b=void 0===E?function(e){return e}:E;return H(u.a,{container:!0,justify:"space-evenly",alignItems:"center",wrap:"wrap",className:"my-2 p-2"},H(u.a,{item:!0,grow:3},H(P.a,null,"Search",H($,{sendValue:v}))),H(u.a,{item:!0},H(P.a,null,H("p",null,"View by resolution stages"),H(A.a,null,H(I.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},H(j.a,{onClick:function(){return a(0)},className:"bg-warning"},"Pending"),H(j.a,{className:"bg-info mx-2",onClick:function(){return a(1)}},"In-progress"," "),H(j.a,{className:"bg-success",onClick:function(){return a(2)}},"Resolved"))))),H(u.a,{item:!0},H("p",null,"View by issues"),H(G.d,{issues:r,getIssue:i,issue:c})),H(u.a,{item:!0},H("p",null," View By days"),H(L.a,{type:"date",onChange:function(e){return b(e.target.value)}})),H(u.a,{item:!0},H("p",null," view by Colleagues "),H(G.a,{users:d,getUser:m,user:p})))},$=function(e){var t=e.sendValue,a=void 0===t?function(e){return e}:t,r=o.a.useState(""),i=Object(n.a)(r,2),s=i[0],c=i[1],l=function(e){e.preventDefault(),s.trim().length>0&&a(s)};return H("form",{className:"form w-100",noValidate:!0,autoComplete:"off",onSubmit:l},H(R.a,null,H(q.a,{htmlFor:"search-post"},"Search name,email,phone"),H(F.a,{error:!0,type:"search",id:"search-post",label:"Outlined",variant:"outlined",autoFocus:!0,onChange:function(e){return c(e.target.value)},endAdornment:H(K.a,{position:"end"},H(N.a,{size:"large",style:{cursor:"pointer"},onClick:l})),"aria-describedby":"standard-weight-helper-text",inputProps:{"aria-label":"search"}}),H(z.a,null,"Search anything")))},Q=function(e){var t=e.posts;return H(U.a,null,t," ",t>1?"issues":"issue")},W=o.a.createElement;t.default=function(){var e=o.a.useState(""),t=Object(n.a)(e,2),a=t[0],r=t[1],c=o.a.useState(!1),v=Object(n.a)(c,2),E=v[0],b=v[1],y=o.a.useState(""),S=Object(n.a)(y,2),D=S[0],N=S[1],T=o.a.useState(""),O=Object(n.a)(T,2),w=O[0],_=O[1],C=o.a.useState(0),k=Object(n.a)(C,2),M=k[0],x=k[1],j=Object(s.b)(),P=20,A=5,I=Object(s.c)((function(e){return{posts:e.posts.posts,issues:e.issues.deptIssues,users:e.users.userdepts}})),L=I.posts,R=I.issues,q=I.users,F=function(e){b(!0),l.a.get("/posts/".concat(e)).then((function(e){if(!e.data.length||!Array.isArray(e.data))throw new Error("No data found");j(p.e(e.data))})).catch((function(e){r("Something went wrong...".concat(e.message))})).finally((function(){b(!1)}))},z=function(e,t){l.a.get(e).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");var a=e.data;j(t(a))})).catch((function(e){return r("Error: "+e.message)})).finally((function(){setTimeout((function(){r(""),!L.length&&F(P)}),5e3)}))},U=function(e){l.a.get("/posts/issues/".concat(e,"/").concat(P)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");j(m.a(e.data))})).catch((function(e){return console.error("fetch posts:",e)}))};return o.a.useEffect((function(){var e;L.length&&R.length&&q.length||Promise.all([F(P),(e=A,void l.a.get("/posts/deptusers/".concat(e,"/").concat(P)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");var t=e.data;j(h.b(t))})).catch((function(e){return console.error("fetch posts:",e)})).finally((function(){return console.log("finally")}))),U(A)]),console.log("running effect")}),[]),W(g.a,null,W(u.a,{container:!0},W(Y,{sendGroup:function(e){var t="/posts/btngroup/".concat(e,"/").concat(P);z(t,p.e)},issues:R,issue:D,setIssue:function(e){N(e),console.log("issueue",e);var t="/posts/fetchdeptIssues/".concat(e,"/").concat(P);z(t,p.e)},users:q,user:w,getUser:function(e){_(e);var t="/posts/fetchdeptusers/".concat(e,"/").concat(P);z(t,p.e)},handleSearch:function(e){var t="/posts/search/".concat(e,"/").concat(P);z(t,p.e)},getDate:function(e){var t="/posts/fetchdates/".concat(e,"/").concat(P);z(t,p.e)}}),W(d.a,null),L.length?W(o.a.Fragment,null,W(V.a,{count:5,page:M-1,color:"primary",defaultPage:1,onChange:function(e,t){return x(t+1)}}),W(Z,{posts:L,setTicks:function(e){j(p.k(e)),l.a.get("/posts/setticks/".concat(e,"/").concat(P)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log("ticks",e)}))}})):E&&!a?W("div",{className:"text-center mx-auto my-4 p-4"},W(f.a,{size:"3rem"})):W(i.a,{severity:"error",className:"text-center my-1 mx-auto w-50 p-1"}," ",a)))}},aJdC:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={ADD_POSTS:"ADD_POSTS",ADD_POST:"ADD_POST",SELECTED_USER:"SELECTED_USER",SET_TICKS:"SET_TICKS",GET_POST:"GET_POST",ADD_COMMENT:"ADD_COMMENT",DELETE_COMMENT:"DELETE_COMMENT",ADD_COMMENTS:"ADD_COMMENTS",ADD_RECENT_POSTS:"ADD_RECENT_POSTS",EDITED_COMMENT:"EDITED_COMMENT",RESOLVE_ISSUE:"RESOLVE_ISSUE",RECENT_CLICKED:"RECENT_CLICKED"}},bSwy:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),o=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=o},"f+F2":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),o=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.default=o},iae6:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),o=a("q1tI"),i=(a("17x9"),a("iuhU")),s=a("H2TA"),c=a("NqtD");function l(e){var t,a,n;return t=e,a=0,n=1,e=(Math.min(Math.max(a,t),n)-a)/(n-a),e=(e-=1)*e*e+1}var u=o.forwardRef((function(e,t){var a,s=e.classes,u=e.className,d=e.color,f=void 0===d?"primary":d,p=e.disableShrink,h=void 0!==p&&p,m=e.size,g=void 0===m?40:m,v=e.style,E=e.thickness,b=void 0===E?3.6:E,y=e.value,S=void 0===y?0:y,D=e.variant,N=void 0===D?"indeterminate":D,T=Object(r.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),O={},w={},_={};if("determinate"===N||"static"===N){var C=2*Math.PI*((44-b)/2);O.strokeDasharray=C.toFixed(3),_["aria-valuenow"]=Math.round(S),"static"===N?(O.strokeDashoffset="".concat(((100-S)/100*C).toFixed(3),"px"),w.transform="rotate(-90deg)"):(O.strokeDashoffset="".concat((a=(100-S)/100,a*a*C).toFixed(3),"px"),w.transform="rotate(".concat((270*l(S/70)).toFixed(3),"deg)"))}return o.createElement("div",Object(n.a)({className:Object(i.a)(s.root,u,"inherit"!==f&&s["color".concat(Object(c.a)(f))],{indeterminate:s.indeterminate,static:s.static}[N]),style:Object(n.a)(Object(n.a)({width:g,height:g},w),v),ref:t,role:"progressbar"},_,T),o.createElement("svg",{className:s.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},o.createElement("circle",{className:Object(i.a)(s.circle,h&&s.circleDisableShrink,{indeterminate:s.circleIndeterminate,static:s.circleStatic}[N]),style:O,cx:44,cy:44,r:(44-b)/2,fill:"none",strokeWidth:b})))}));t.a=Object(s.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(u)}},[["GOMq",0,1,2,3,4,5,6,7,8,10,11,13]]]);