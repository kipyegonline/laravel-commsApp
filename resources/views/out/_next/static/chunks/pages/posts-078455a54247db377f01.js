_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"7SZd":function(e,t,n){"use strict";var a=n("wx14"),o=n("Ff2n"),r=n("q1tI"),s=(n("17x9"),n("iuhU")),i=n("ofer"),c=n("H2TA"),u=n("4hqb"),l=r.forwardRef((function(e,t){var n=e.children,c=e.classes,l=e.className,d=e.component,f=void 0===d?"div":d,p=e.disablePointerEvents,h=void 0!==p&&p,g=e.disableTypography,m=void 0!==g&&g,v=e.position,E=e.variant,b=Object(o.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),y=Object(u.b)()||{},S=E;return E&&y.variant,y&&!S&&(S=y.variant),r.createElement(u.a.Provider,{value:null},r.createElement(f,Object(a.a)({className:Object(s.a)(c.root,l,h&&c.disablePointerEvents,y.hiddenLabel&&c.hiddenLabel,"filled"===S&&c.filled,{start:c.positionStart,end:c.positionEnd}[v],"dense"===y.margin&&c.marginDense),ref:t},b),"string"!==typeof n||m?n:r.createElement(i.a,{color:"textSecondary"},n)))}));t.a=Object(c.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(l)},GOMq:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts",function(){return n("PJ8K")}])},OXHv:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"k",(function(){return s})),n.d(t,"j",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h}));var a=n("aJdC"),o=function(e){return{type:a.a.ADD_POSTS,payload:e}},r=function(e){return{type:a.a.ADD_POST,payload:e}},s=function(e){return{type:a.a.SET_TICKS,payload:e}},i=function(e){return{type:a.a.RESOLVE_ISSUE,payload:e}},c=function(e){return{type:a.a.GET_POST,payload:e}},u=function(e){return{type:a.a.ADD_COMMENT,payload:e}},l=function(e){return{type:a.a.EDITED_COMMENT,payload:e}},d=function(e){return{type:a.a.DELETE_COMMENT,payload:e}},f=function(e){return{type:a.a.ADD_COMMENTS,payload:e}},p=function(e){return{type:a.a.ADD_RECENT_POSTS,payload:e}},h=function(e){return{type:a.a.RECENT_CLICKED,payload:e}}},PJ8K:function(e,t,n){"use strict";n.r(t);var a=n("ODXe"),o=n("q1tI"),r=n.n(o),s=n("ZiQX"),i=n("/MKj"),c=n("vDqi"),u=n.n(c),l=n("tRbT"),d=n("wb2y"),f=n("iae6"),p=n("OXHv"),h=n("5jqn"),g=n("lMTm"),m=n("L6Je"),v=n("wx14"),E=n("MX0m"),b=n.n(E),y=n("nOHt"),S=n.n(y),T=(n("YFqc"),n("bSwy")),N=n.n(T),w=n("f+F2"),D=n.n(w),_=n("nCZa"),O=n("/EAt"),C=n("Imu7"),M=n("sRsu"),A=n("3PeG"),P=n("Uf6+"),I=n("Z3vd"),j=n("30+C"),L=n("o4QW"),R=n("NrVZ"),k=n("r9w1"),x=n("ADg1"),q=n("1AYd"),K=n("pdwK"),U=n("Spdj"),V=n("ofer"),z=n("7SZd"),F=n("l1im"),G=n("t6oH"),H=r.a.createElement,J=20;var X=function(e){var t=e.id,n=e.index,a=void 0===n?"":n,o=e.clientName,r=void 0===o?"":o,s=e.clientPhone,i=void 0===s?"":s,c=e.clientEmail,u=void 0===c?"":c,l=e.clientOrg,d=void 0===l?"":l,f=(e.message,e.handler),p=void 0===f?"":f,h=e.issue,g=void 0===h?"":h,m=e.handler_id,v=void 0===m?0:m,E=e.subject,b=void 0===E?"":E,y=(e.clientDept,e.addedBy),T=void 0===y?"":y,N=e.status,w=void 0===N?"":N,_=e.adder,O=void 0===_?"":_,C=e.altId,P=void 0===C?"":C,j=e.addedon,L=void 0===j?"":j,R=e.seen,k=void 0===R?"0":R,x=e.setTicks,q=void 0===x?function(e){return e}:x,K=function(e){return Boolean(Number(e))?Number(e)>1?["bg-success","Resolved"]:["bg-info","In-progress"]:["bg-warning","Pending"]};return H(M.a,null,H(A.a,null,a+1,H(D.a,{color:Boolean(Number(k))?"secondary":"inherit"})," "),H(A.a,null,r),H(A.a,null,i," ",H("br",null),H("small",null,u)),H(A.a,null,d),H(A.a,null,g),H(A.a,null,b),H(A.a,null,H("b",null,+v===J?"You":p," ")),H(A.a,null,H(I.a,{className:"".concat(K(w)[0]," text-white"),size:"small"},K(w)[1])),H(A.a,null,L),H(A.a,null,H("b",null,+v===J||O===J?"You":T," ")),H(A.a,null,H(I.a,{variant:"contained",color:"secondary",target:"_blank",onClick:function(){return function(e,t,n,a){J===+v&&0===k&&q(e),n.split(" ").join("-"),S.a.push("/post/".concat(t),void 0,{shallow:!1})}(t,P,b)}},"Details")))},Z=r.a.memo(X,(function(e,t){return e.id===t.id})),B=function(e){var t=e.posts,n=void 0===t?[]:t,o=e.setTicks,s=void 0===o?function(e){return e}:o,i=n.length>=10?10:n.length,c=Math.ceil(n.length/i),u=r.a.useState(0),l=Object(a.a)(u,2),d=l[0],f=l[1],p=d*i,h=d*i+i;return H(r.a.Fragment,null,H($,{posts:n.length}),H(_.a,{className:"table-responsive"},H(O.a,{className:"table"},H(C.a,null,H(M.a,null,H(A.a,{component:"th",scope:"row",className:"thead"},"#"),H(A.a,{scope:"row",className:"thead bg-light"},"Name"),H(A.a,{scope:"row",className:"thead bg-light"},"Contacts"),H(A.a,{scope:"row",className:"thead bg-light"},"Organisation"),H(A.a,{scope:"row",className:"thead bg-light"},"Issue"),H(A.a,{scope:"row",className:"thead bg-light"},"Subject"),H(A.a,{scope:"row",className:"thead bg-light"},"Handler"),H(A.a,{scope:"row",className:"thead bg-light"},"Status"),H(A.a,{scope:"row",className:"thead bg-light"},"Added on"),H(A.a,{scope:"row",className:"thead bg-light"},"Added By"),H(A.a,{scope:"row",className:"thead bg-light"},"Details"))),H(P.a,null,n.slice(p,h).map((function(e,t){return H(Z,Object(v.a)({key:e.id},e,{setTicks:s,index:t}))})))),H(b.a,{id:"4047313646"},[".thead.jsx-4047313646{font-weight:bold;color:red;}"])),H(F.a,{color:"primary",rounded:!0,count:c,defaultPage:d+1,size:"large",onChange:function(e,t){f(t-1)}}))},Y=function(e){var t=e.sendGroup,n=void 0===t?function(e){return e}:t,a=e.issues,o=void 0===a?[]:a,r=e.setIssue,s=void 0===r?function(e){return e}:r,i=e.issue,c=void 0===i?string:i,u=e.users,d=void 0===u?[]:u,f=e.user,p=void 0===f?{}:f,h=e.getUser,g=void 0===h?function(e){return e}:h,m=e.handleSearch,v=void 0===m?function(e){return e}:m,E=e.getDate,b=void 0===E?function(e){return e}:E;return H(l.a,{container:!0,justify:"space-evenly",alignItems:"center",wrap:"wrap",className:"my-2 p-2"},H(l.a,{item:!0,grow:3},H(j.a,null,"Search",H(Q,{sendValue:v}))),H(l.a,{item:!0},H(j.a,null,H("p",null,"View by resolution stages"),H(L.a,null,H(R.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},H(I.a,{onClick:function(){return n(0)},className:"bg-warning"},"Pending"),H(I.a,{className:"bg-info mx-2",onClick:function(){return n(1)}},"In-progress"," "),H(I.a,{className:"bg-success",onClick:function(){return n(2)}},"Resolved"))))),H(l.a,{item:!0},H("p",null,"View by issues"),H(G.d,{issues:o,getIssue:s,issue:c})),H(l.a,{item:!0},H("p",null," View By days"),H(k.a,{type:"date",onChange:function(e){return b(e.target.value)}})),H(l.a,{item:!0},H("p",null," view by Colleagues "),H(G.a,{users:d,getUser:g,user:p})))},Q=function(e){var t=e.sendValue,n=void 0===t?function(e){return e}:t,o=r.a.useState(""),s=Object(a.a)(o,2),i=s[0],c=s[1],u=function(e){e.preventDefault(),i.trim().length>0&&n(i)};return H("form",{className:"form w-100",noValidate:!0,autoComplete:"off",onSubmit:u},H(x.a,null,H(q.a,{htmlFor:"search-post"},"Search name,email,phone"),H(K.a,{error:!0,type:"search",id:"search-post",label:"Outlined",variant:"outlined",autoFocus:!0,onChange:function(e){return c(e.target.value)},endAdornment:H(z.a,{position:"end"},H(N.a,{size:"large",style:{cursor:"pointer"},onClick:u})),"aria-describedby":"standard-weight-helper-text",inputProps:{"aria-label":"search"}}),H(U.a,null,"Search anything")))},$=function(e){var t=e.posts;return H(V.a,null,t," ",t>1?"issues":"issue")},W=r.a.createElement;t.default=function(){var e,t=r.a.useState(""),n=Object(a.a)(t,2),o=n[0],c=n[1],v=r.a.useState(!1),E=Object(a.a)(v,2),b=E[0],y=E[1],S=r.a.useState(""),T=Object(a.a)(S,2),N=T[0],w=T[1],D=r.a.useState(""),_=Object(a.a)(D,2),O=_[0],C=_[1],M=r.a.useState(0),A=Object(a.a)(M,2),P=(A[0],A[1],Object(i.b)()),I=20,j=5,L=Object(i.c)((function(e){return{posts:e.posts.posts,issues:e.issues.deptIssues,users:e.users.userdepts}})),R=L.posts,k=L.issues,x=L.users,q=function(e){y(!0),u.a.get("/posts/".concat(e)).then((function(e){if(!e.data.length||!Array.isArray(e.data))throw new Error("No data found");P(p.e(e.data))})).catch((function(e){c("Something went wrong...".concat(e.message))})).finally((function(){y(!1)}))},K=function(t,n){y(!0),clearTimeout(e),u.a.get(t).then((function(e){if(!(null===e||void 0===e?void 0:e.data.length)||!Array.isArray(e.data))throw new Error("No data found");var t=e.data;P(n(t))})).catch((function(t){c("Error: "+t.message),e=setTimeout((function(){o.length&&q(I),c(""),console.log("callbaak",o.length)}),5e3)})).finally((function(){y(!1)}))},U=function(e){u.a.get("/posts/issues/".concat(e,"/").concat(I)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");P(g.a(e.data))})).catch((function(e){return console.error("fetch posts:",e)}))};return r.a.useEffect((function(){var e;R.length&&k.length&&x.length||Promise.all([q(I),(e=j,void u.a.get("/posts/deptusers/".concat(e,"/").concat(I)).then((function(e){if(!Array.isArray(e.data))throw new Error("No data found");var t=e.data;P(h.b(t))})).catch((function(e){return console.error("fetch posts:",e)})).finally((function(){return console.log("finally")}))),U(j)])}),[]),W(m.a,null,W(l.a,{container:!0},W(Y,{sendGroup:function(e){var t="/posts/btngroup/".concat(e,"/").concat(I);K(t,p.e)},issues:k,issue:N,setIssue:function(e){w(e);var t="/posts/fetchdeptIssues/".concat(e,"/").concat(I);K(t,p.e)},users:x,user:O,getUser:function(e){C(e);var t="/posts/fetchdeptusers/".concat(e,"/").concat(I);K(t,p.e)},handleSearch:function(e){var t="/posts/search/".concat(e,"/").concat(I);K(t,p.e)},getDate:function(e){var t="/posts/fetchdates/".concat(e,"/").concat(I);K(t,p.e)}}),W(d.a,null),R.length?W(r.a.Fragment,null,W(B,{posts:R,setTicks:function(e){P(p.k(e)),u.a.get("/posts/setticks/".concat(e,"/").concat(I)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log("ticks",e)}))}})):b?W("div",{className:"text-center mx-auto my-4 p-4"},W(f.a,{size:"3rem"})):W(s.a,{severity:"error",className:"text-center my-1 mx-auto w-50 p-1"}," ",o)))}},aJdC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={ADD_POSTS:"ADD_POSTS",ADD_POST:"ADD_POST",SELECTED_USER:"SELECTED_USER",SET_TICKS:"SET_TICKS",GET_POST:"GET_POST",ADD_COMMENT:"ADD_COMMENT",DELETE_COMMENT:"DELETE_COMMENT",ADD_COMMENTS:"ADD_COMMENTS",ADD_RECENT_POSTS:"ADD_RECENT_POSTS",EDITED_COMMENT:"EDITED_COMMENT",RESOLVE_ISSUE:"RESOLVE_ISSUE",RECENT_CLICKED:"RECENT_CLICKED"}},bSwy:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),r=(0,a(n("8/g6")).default)(o.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=r},"f+F2":function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("q1tI")),r=(0,a(n("8/g6")).default)(o.default.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.default=r}},[["GOMq",0,1,2,3,4,5,6,7,8,9,10,13]]]);