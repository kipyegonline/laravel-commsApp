_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{"7Cbv":function(e,t,r){"use strict";var n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),a=new Uint8Array(16);function o(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}for(var i=[],c=0;c<256;++c)i.push((c+256).toString(16).substr(1));var s=function(e,t){var r=t||0,n=i;return(n[e[r+0]]+n[e[r+1]]+n[e[r+2]]+n[e[r+3]]+"-"+n[e[r+4]]+n[e[r+5]]+"-"+n[e[r+6]]+n[e[r+7]]+"-"+n[e[r+8]]+n[e[r+9]]+"-"+n[e[r+10]]+n[e[r+11]]+n[e[r+12]]+n[e[r+13]]+n[e[r+14]]+n[e[r+15]]).toLowerCase()};t.a=function(e,t,r){"string"===typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){for(var a=r||0,i=0;i<16;++i)t[a+i]=n[i];return t}return s(n)}},FrwU:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("q1tI")),o=(0,n(r("8/g6")).default)(a.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=o},IsqK:function(e,t,r){"use strict";var n=r("wx14"),a=r("Ff2n"),o=r("q1tI"),i=(r("17x9"),r("iuhU")),c=r("H2TA"),s=r("ofer"),u=r("MquD"),l=o.forwardRef((function(e,t){var r=e.children,c=e.classes,l=e.className,d=e.disableTypography,p=void 0!==d&&d,f=e.inset,m=void 0!==f&&f,y=e.primary,E=e.primaryTypographyProps,h=e.secondary,b=e.secondaryTypographyProps,g=Object(a.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),v=o.useContext(u.a).dense,S=null!=y?y:r;null==S||S.type===s.a||p||(S=o.createElement(s.a,Object(n.a)({variant:v?"body2":"body1",className:c.primary,component:"span",display:"block"},E),S));var T=h;return null==T||T.type===s.a||p||(T=o.createElement(s.a,Object(n.a)({variant:"body2",className:c.secondary,color:"textSecondary",display:"block"},b),T)),o.createElement("div",Object(n.a)({className:Object(i.a)(c.root,l,v&&c.dense,m&&c.inset,S&&T&&c.multiline),ref:t},g),S,T)}));t.a=Object(c.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},JbGh:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post",function(){return r("s55V")}])},MPUk:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("q1tI")),o=(0,n(r("8/g6")).default)(a.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=o},NyZT:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={ADD_ISSUES:"ADD_ISSUES",DELETE_ISSUES:"DELETE_ISSUES",ADD_ISSUE:"ADD_ISSUE",ADD_SELECTED:"ADD_SELECTED",REMOVE_SELECTED:"REMOVE_SELECTED",ADD_FETCHED:"ADD_FETCHED",REMOVE_FETCHED:"REMOVE_FETCHED",DEPT_ISSUES:"DEPT_ISSUES",RESET_ISSUES:"RESET_ISSUES",ISSUE_DEPT:"ISSUE_DEPT",FETCH_ALL:"FETCH_ALL"}},OXHv:function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"k",(function(){return i})),r.d(t,"j",(function(){return c})),r.d(t,"h",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"i",(function(){return m}));var n=r("aJdC"),a=function(e){return{type:n.a.ADD_POSTS,payload:e}},o=function(e){return{type:n.a.ADD_POST,payload:e}},i=function(e){return{type:n.a.SET_TICKS,payload:e}},c=function(e){return{type:n.a.RESOLVE_ISSUE,payload:e}},s=function(e){return{type:n.a.GET_POST,payload:e}},u=function(e){return{type:n.a.ADD_COMMENT,payload:e}},l=function(e){return{type:n.a.EDITED_COMMENT,payload:e}},d=function(e){return{type:n.a.DELETE_COMMENT,payload:e}},p=function(e){return{type:n.a.ADD_COMMENTS,payload:e}},f=function(e){return{type:n.a.ADD_RECENT_POSTS,payload:e}},m=function(e){return{type:n.a.RECENT_CLICKED,payload:e}}},Spdj:function(e,t,r){"use strict";var n=r("Ff2n"),a=r("wx14"),o=r("q1tI"),i=(r("17x9"),r("iuhU")),c=r("28cb"),s=r("EHdT"),u=r("H2TA"),l=o.forwardRef((function(e,t){var r=e.children,u=e.classes,l=e.className,d=e.component,p=void 0===d?"p":d,f=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(n.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),m=Object(s.a)(),y=Object(c.a)({props:e,muiFormControl:m,states:["variant","margin","disabled","error","filled","focused","required"]});return o.createElement(p,Object(a.a)({className:Object(i.a)(u.root,("filled"===y.variant||"outlined"===y.variant)&&u.contained,l,y.disabled&&u.disabled,y.error&&u.error,y.filled&&u.filled,y.focused&&u.focused,y.required&&u.required,"dense"===y.margin&&u.marginDense),ref:t},f)," "===r?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):r)}));t.a=Object(u.a)((function(e){return{root:Object(a.a)(Object(a.a)({color:e.palette.text.secondary},e.typography.caption),{},{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(l)},aJdC:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={ADD_POSTS:"ADD_POSTS",ADD_POST:"ADD_POST",SELECTED_USER:"SELECTED_USER",SET_TICKS:"SET_TICKS",GET_POST:"GET_POST",ADD_COMMENT:"ADD_COMMENT",DELETE_COMMENT:"DELETE_COMMENT",ADD_COMMENTS:"ADD_COMMENTS",ADD_RECENT_POSTS:"ADD_RECENT_POSTS",EDITED_COMMENT:"EDITED_COMMENT",RESOLVE_ISSUE:"RESOLVE_ISSUE",RECENT_CLICKED:"RECENT_CLICKED"}},hlFM:function(e,t,r){"use strict";var n=r("KQm4"),a=r("wx14"),o=(r("17x9"),r("bv9d"));var i=function(e){var t=function(t){var r=e(t);return t.css?Object(a.a)(Object(a.a)({},Object(o.a)(r,e(Object(a.a)({theme:t.theme},t.css)))),function(e,t){var r={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(r[n]=e[n])})),r}(t.css,[e.filterProps])):r};return t.propTypes={},t.filterProps=["css"].concat(Object(n.a)(e.filterProps)),t};var c=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){return t.reduce((function(t,r){var n=r(e);return n?Object(o.a)(t,n):t}),{})};return n.propTypes={},n.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),n},s=r("rePB"),u=r("LybE");function l(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var d=function(e){var t=e.prop,r=e.cssProperty,n=void 0===r?e.prop:r,a=e.themeKey,o=e.transform,i=function(e){if(null==e[t])return null;var r=e[t],i=l(e.theme,a)||{};return Object(u.a)(e,r,(function(e){var t;return"function"===typeof i?t=i(e):Array.isArray(i)?t=i[e]||e:(t=l(i,e)||e,o&&(t=o(t))),!1===n?t:Object(s.a)({},n,t)}))};return i.propTypes={},i.filterProps=[t],i};function p(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var f=c(d({prop:"border",themeKey:"borders",transform:p}),d({prop:"borderTop",themeKey:"borders",transform:p}),d({prop:"borderRight",themeKey:"borders",transform:p}),d({prop:"borderBottom",themeKey:"borders",transform:p}),d({prop:"borderLeft",themeKey:"borders",transform:p}),d({prop:"borderColor",themeKey:"palette"}),d({prop:"borderRadius",themeKey:"shape"})),m=c(d({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),d({prop:"display"}),d({prop:"overflow"}),d({prop:"textOverflow"}),d({prop:"visibility"}),d({prop:"whiteSpace"})),y=c(d({prop:"flexBasis"}),d({prop:"flexDirection"}),d({prop:"flexWrap"}),d({prop:"justifyContent"}),d({prop:"alignItems"}),d({prop:"alignContent"}),d({prop:"order"}),d({prop:"flex"}),d({prop:"flexGrow"}),d({prop:"flexShrink"}),d({prop:"alignSelf"}),d({prop:"justifyItems"}),d({prop:"justifySelf"})),E=c(d({prop:"gridGap"}),d({prop:"gridColumnGap"}),d({prop:"gridRowGap"}),d({prop:"gridColumn"}),d({prop:"gridRow"}),d({prop:"gridAutoFlow"}),d({prop:"gridAutoColumns"}),d({prop:"gridAutoRows"}),d({prop:"gridTemplateColumns"}),d({prop:"gridTemplateRows"}),d({prop:"gridTemplateAreas"}),d({prop:"gridArea"})),h=c(d({prop:"position"}),d({prop:"zIndex",themeKey:"zIndex"}),d({prop:"top"}),d({prop:"right"}),d({prop:"bottom"}),d({prop:"left"})),b=c(d({prop:"color",themeKey:"palette"}),d({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),g=d({prop:"boxShadow",themeKey:"shadows"});function v(e){return e<=1?"".concat(100*e,"%"):e}var S=d({prop:"width",transform:v}),T=d({prop:"maxWidth",transform:v}),O=d({prop:"minWidth",transform:v}),D=d({prop:"height",transform:v}),_=d({prop:"maxHeight",transform:v}),j=d({prop:"minHeight",transform:v}),C=(d({prop:"size",cssProperty:"width",transform:v}),d({prop:"size",cssProperty:"height",transform:v}),c(S,T,O,D,_,j,d({prop:"boxSizing"}))),w=r("+Hmc"),P=c(d({prop:"fontFamily",themeKey:"typography"}),d({prop:"fontSize",themeKey:"typography"}),d({prop:"fontStyle",themeKey:"typography"}),d({prop:"fontWeight",themeKey:"typography"}),d({prop:"letterSpacing"}),d({prop:"lineHeight"}),d({prop:"textAlign"})),I=r("Ff2n"),N=r("q1tI"),x=r.n(N),R=r("iuhU"),M=r("2mql"),A=r.n(M),L=r("RD7I");function F(e,t){var r={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(r[n]=e[n])})),r}var k=r("cNwE"),U=function(e){var t=function(e){return function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.name,i=Object(I.a)(n,["name"]),c=o,s="function"===typeof t?function(e){return{root:function(r){return t(Object(a.a)({theme:e},r))}}}:{root:t},u=Object(L.a)(s,Object(a.a)({Component:e,name:o||e.displayName,classNamePrefix:c},i));t.filterProps&&(r=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var l=x.a.forwardRef((function(t,n){var o=t.children,i=t.className,c=t.clone,s=t.component,l=Object(I.a)(t,["children","className","clone","component"]),d=u(t),p=Object(R.a)(d.root,i),f=l;if(r&&(f=F(f,r)),c)return x.a.cloneElement(o,Object(a.a)({className:Object(R.a)(o.props.className,p)},f));if("function"===typeof o)return o(Object(a.a)({className:p},f));var m=s||e;return x.a.createElement(m,Object(a.a)({ref:n,className:p},f),o)}));return A()(l,e),l}}(e);return function(e,r){return t(e,Object(a.a)({defaultTheme:k.a},r))}},K=i(c(f,m,y,E,h,b,g,C,w.b,P)),V=U("div")(K,{name:"MuiBox"});t.a=V},lMTm:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"f",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return c})),r.d(t,"k",(function(){return s})),r.d(t,"j",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"i",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"h",(function(){return f})),r.d(t,"g",(function(){return m}));var n=r("NyZT"),a=function(e){return{type:n.a.ADD_ISSUES,payload:e}},o=function(e){return{type:n.a.DELETE_ISSUES,payload:e}},i=function(e){return{type:n.a.ADD_ISSUE,payload:e}},c=function(e){return{type:n.a.ADD_SELECTED,payload:e}},s=function(e){return{type:n.a.RESET_ISSUES,payload:e}},u=function(e){return{type:n.a.REMOVE_SELECTED,payload:e}},l=function(e){return{type:n.a.ADD_FETCHED,payload:e}},d=function(e){return{type:n.a.REMOVE_FETCHED,payload:e}},p=function(e){return{type:n.a.DEPT_ISSUES,payload:e}},f=function(e){return{type:n.a.ISSUE_DEPT,payload:e}},m=function(){return{type:n.a.FETCH_ALL}}},r9w1:function(e,t,r){"use strict";var n=r("wx14"),a=r("Ff2n"),o=r("q1tI"),i=(r("17x9"),r("iuhU")),c=r("pdwK"),s=r("TLZQ"),u=r("KmP9"),l=r("1AYd"),d=r("ADg1"),p=r("Spdj"),f=r("cVXz"),m=r("H2TA"),y={standard:c.a,filled:s.a,outlined:u.a},E=o.forwardRef((function(e,t){var r=e.autoComplete,c=e.autoFocus,s=void 0!==c&&c,u=e.children,m=e.classes,E=e.className,h=e.color,b=void 0===h?"primary":h,g=e.defaultValue,v=e.disabled,S=void 0!==v&&v,T=e.error,O=void 0!==T&&T,D=e.FormHelperTextProps,_=e.fullWidth,j=void 0!==_&&_,C=e.helperText,w=e.hiddenLabel,P=e.id,I=e.InputLabelProps,N=e.inputProps,x=e.InputProps,R=e.inputRef,M=e.label,A=e.multiline,L=void 0!==A&&A,F=e.name,k=e.onBlur,U=e.onChange,K=e.onFocus,V=e.placeholder,H=e.required,q=void 0!==H&&H,z=e.rows,B=e.rowsMax,W=e.select,G=void 0!==W&&W,J=e.SelectProps,X=e.type,Z=e.value,Y=e.variant,Q=void 0===Y?"standard":Y,$=Object(a.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","value","variant"]);var ee={};if("outlined"===Q&&(I&&"undefined"!==typeof I.shrink&&(ee.notched=I.shrink),M)){var te,re=null!==(te=null===I||void 0===I?void 0:I.required)&&void 0!==te?te:q;ee.label=o.createElement(o.Fragment,null,M,re&&"\xa0*")}G&&(J&&J.native||(ee.id=void 0),ee["aria-describedby"]=void 0);var ne=C&&P?"".concat(P,"-helper-text"):void 0,ae=M&&P?"".concat(P,"-label"):void 0,oe=y[Q],ie=o.createElement(oe,Object(n.a)({"aria-describedby":ne,autoComplete:r,autoFocus:s,defaultValue:g,fullWidth:j,multiline:L,name:F,rows:z,rowsMax:B,type:X,value:Z,id:P,inputRef:R,onBlur:k,onChange:U,onFocus:K,placeholder:V,inputProps:N},ee,x));return o.createElement(d.a,Object(n.a)({className:Object(i.a)(m.root,E),disabled:S,error:O,fullWidth:j,hiddenLabel:w,ref:t,required:q,color:b,variant:Q},$),M&&o.createElement(l.a,Object(n.a)({htmlFor:P,id:ae},I),M),G?o.createElement(f.a,Object(n.a)({"aria-describedby":ne,id:P,labelId:ae,value:Z,input:ie},J),u):ie,C&&o.createElement(p.a,Object(n.a)({id:ne},D),C))}));t.a=Object(m.a)({root:{}},{name:"MuiTextField"})(E)},s55V:function(e,t,r){"use strict";r.r(t);var n=r("wx14"),a=r("rePB"),o=r("ODXe"),i=r("q1tI"),c=r.n(i),s=r("nOHt"),u=r.n(s),l=r("YFqc"),d=r.n(l),p=r("vDqi"),f=r.n(p),m=r("R/WZ"),y=r("/MKj"),E=r("tRbT"),h=r("ofer"),b=r("hlFM"),g=r("iae6"),v=r("wb2y"),S=r("NrVZ"),T=r("Z3vd"),O=r("eD//"),D=r("tVbE"),_=r("IsqK"),j=r("IFCi"),C=r("SpDg"),w=r("OXHv"),P=(r("lMTm"),r("r9w1")),I=r("Spdj"),N=r("PsDL"),x=r("ADg1"),R=r("FrwU"),M=r.n(R),A=r("MPUk"),L=r.n(A),F=r("7Cbv"),k=r("EVdn"),U=r.n(k),K=c.a.createElement,V=20,H="Vince";function q(e){var t=e.comments,r=e.sendValue,n=e.post_id,a=e.handler_id,i=c.a.useState(""),s=Object(o.a)(i,2),u=s[0],l=s[1],d=Object(y.b)(),p=c.a.useRef(null),m=c.a.useRef(null),h=function(e){if(e.preventDefault(),u.trim().length>0){p.current.disabled=!0;var t={comment:u.trim(),altId:Object(F.a)(),uuid:V,post_id:n,addedon:(new Date).toLocaleTimeString(),addedIn:(new Date).toLocaleDateString(),addedUn:(new Date).toDateString(),addedEn:(new Date).toLocaleString(),addedBy:H};r(t),U.a.ajax({url:"./server/posts/posts.php?addcomment=true",data:t,type:"POST",dataType:"json"}).then((function(e){if(200!==e.status)throw new Error(e.msg);l(""),m.current.reset(),p.current.disabled=!1})).catch((function(e){p.current.disabled=!1,console.error("add err",e)})),l(""),m.current.reset()}};return K(E.a,{container:!0,spacing:2,alignItems:"flex-start",justify:"flex-start",alignContent:"flex-start"},K(E.a,{md:6,xs:12,item:!0},K("form",{onSubmit:h,onKeyPress:function(e){return"Enter"===e.key&&h(e)},ref:m},K(P.a,{label:"Write comment",variant:"outlined",multiline:!0,rows:3,cols:40,onChange:function(e){return l(e.target.value)}}),K(b.a,{className:"my-2"},K(T.a,{color:"primary",type:"submit",variant:"contained",ref:p},"Comment")))),K(E.a,{md:6,xs:12,item:!0},t.length?K(B,{comments:t.length}):null,K(z,{list:t,handler_id:a,getEdited:function(e){d(w.c(e)),U.a.ajax({type:"POST",url:"./server/posts/posts.php?editComment=true",data:e,dataType:"json"}).then((function(e){return e})).catch((function(e){return console.error(e)}))},deleteKey:function(e){confirm("Delete comment?")&&(d(w.g(e)),f.a.get("./server/posts/posts.php?deleteComment=true&id=".concat(e,"&uuid=").concat(V)))}})))}var z=function(e){var t=e.list,r=e.getEdited,n=e.deleteKey,a=c.a.useState({clicked:!1,id:void 0}),i=Object(o.a)(a,2),s=i[0],u=i[1],l=function(e){e.target&&u({clicked:!0,id:e.target.dataset.editor})};return K(b.a,null,t.map((function(e,t){return K(b.a,{key:e.altId},K("span",{style:{fontSize:16},className:"text-primary"},e.addedBy),K("p",{style:{fontSize:14,fontWeight:"normal"}},e.comment),K(I.a,null," ",e.addedEn),K(W,{id:e.altId,comment:e.comment,display:s.clicked&&s.id===e.altId,sendEdited:r,autoFocus:!0,setEditing:u}),+e.adder===V||e.uuid===V?K(c.a.Fragment,null,K(I.a,null,K(N.a,{onClick:function(){return n(e.altId)}},K(M.a,{size:"sm",color:"secondary",className:"ml-3"}))," ","|",K(N.a,{"data-editor":e.altId,onClick:l},K(L.a,{color:"primary","data-editor":e.altId})))):null,K(v.a,null))})))},B=function(e){var t=e.comments;return K(h.a,{variant:"subtitle1"},t," ",t>1?"comments":"comment")},W=function(e){var t=e.id,r=e.display,n=e.comment,a=e.sendEdited,i=e.setEditing,s=c.a.useState(n),u=Object(o.a)(s,2),l=u[0],d=u[1];c.a.useEffect((function(){d(n)}),[n]);return K(x.a,{style:{display:r?"inline":"none"}},K(P.a,{type:"text",value:l,onChange:function(e){d(e.target.value)},onKeyDown:function(e){"Enter"===e.key?l.trim().length!==n.trim().length?(a({id:t,edit:l,addedEn:(new Date).toLocaleString()}),i({clicked:!1,id:void 0}),d("")):i({clicked:!1,id:void 0}):"Escape"===e.key&&i({clicked:!1,id:void 0})}}),K(I.a,{error:!0},"press enter to comment or esc to cancel"))},G=r("L6Je"),J=c.a.createElement;function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=Object(m.a)({grid:{padding:"1rem",margin:".25rem",background:"#fefefe"},mainGrid:{width:"58%",background:"beige"}}),Q=20,$=(t.default=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),r=t[0],a=t[1],i=c.a.useState([]),l=Object(o.a)(i,2),d=l[0],p=l[1],m=Y(),v=Object(y.b)(),S=Object(s.useRouter)().query,T=S.issue,O=(S.title,Object(y.c)((function(e){return{post:e.posts.post,comments:e.posts.comments,issues:e.issues.deptIssues,recent:e.posts.recentPosts}}))),D=O.post,_=O.comments,j=O.issues,P=O.recent,I=function(e,t){f.a.get("./server/posts/posts.php?fetchcomments=true&uuid=".concat(e,"& postId=").concat(t)).then((function(e){if(!e.data)throw new Error("No payload attached");v(w.b(e.data))})).catch((function(e){return console.error("fetch comments:",e)}))},N=function(e){f.a.get("./server/posts/posts.php?fetchRelatedIssues=true&&uuid=".concat(e)).then((function(e){if(console.log("issues",e),e.data&&e.data.length)return e.data.map((function(e){return Z(Z({},e),{},{selected:!1})}));throw new Error("No payload attached")})).then((function(e){return p(e)})).catch((function(e){return console.error("fetch issues:",e)}))},x=function(e,t,r){f.a.get("./server/posts/posts.php?fetchrecentpost=true&uuid=".concat(e,"&current=").concat(t,"&recent=").concat(r)).then((function(e){if(e.data&&e.data.length)return e.data.map((function(e){return Z(Z({},e),{},{selected:!1})}));throw new Error("No payload attached")})).then((function(e){return v(w.f(e))})).catch((function(e){return console.error("fetch recent posts:",e)}))},R=function(){a(!0);var e,t,r=JSON.parse(localStorage.getItem("postAltid"));Promise.all([(e=Q,t=r,void f.a.get("./server/posts/posts.php?fetchposts=true&uuid=".concat(e,"& postId=").concat(t)).then((function(e){return v(w.d(e.data))})).then((function(){return a(!1)})).catch((function(e){return console.error("fetch posts:",e)}))),I(r)]),setTimeout((function(){N(Q),x(Q,T,!0)}),2e3)};c.a.useEffect((function(){T?(v(w.h(T)),I(Q,T),localStorage.setItem("postAltid",JSON.stringify(T)),setTimeout((function(){N(Q),x(Q,T,!0)}),2e3)):u.a.push("/posts"),window.addEventListener("load",R)}),[]);return J(G.a,{title:D.clientName||"Post"},r?J(C.a,{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,animation:"wave",variant:"rect"},J(g.a,{color:"primary",className:"max-auto my-auto"})):J(E.a,{container:!0,spacing:2,alignItems:"flex-start",justify:"center"},J(E.a,{item:!0,xs:!1,md:3},J(h.a,{variant:"h6"},"Recent issues"),J(te,{relatedissues:j,sendRelated:function(e){var t=d.map((function(t){return t.issue===e?Z(Z({},t),{},{selected:!0}):Z(Z({},t),{},{slected:!1})}));p(t),x(Q,e,!1)}})),J(E.a,{item:!0,className:m.mainGrid,xs:12,md:6}," ",D&&"issue"in D?J(c.a.Fragment,null,J($,Object(n.a)({},D,{handleResolve:function(e){f.a.get("./server/posts/posts.php?resolveissue=true&uuid=".concat(Q,"&issue=").concat(T,"&status=").concat(e)).then((function(t){2===e&&x(Q,T,!0)})).catch((function(e){return console.log(e)})),v(w.j({status:e,altId:T}))}})),J(q,{comments:_,sendValue:function(e){v(w.a(e))},post_id:D.id,handler_id:D.handler_id})):J(b.a,null,J(g.a,{color:"primary"}),J("p",null,"Reloading"))),J(E.a,{item:!0,xs:!1,md:3},J(h.a,{variant:"h6"},"Recent posts"),P.length?J(ee,{recent:P,sendRecent:function(e){v(w.i(e)),I(Q,e.altId)}}):J("p",null,"Loading recent posts"))))},function(e){e.issue;var t=e.clientOrg,r=e.clientPhone,n=e.clientEmail,a=e.clientName,o=e.subject,i=e.message,c=e.addedBy,s=e.handler_id,u=e.adder,l=e.status,d=e.addedon,p=e.handleResolve;return J(b.a,{className:"my-2 p-2"},J(h.a,{variant:"h6"}," ",o),J(v.a,null),J(b.a,null,J(h.a,null," ",i)),J(v.a,null),J(b.a,null,J("h6",null,"Name: ",a),J("h6",null,"Contacts: ",r,", (",n,")"),J("h6",null,"Company/location: ",t)),J(b.a,null,J("small",null," ","Added by ",J("b",null,+u===Q?"You":c," ")," on ",d),J(h.a,null,"Status: ",+l)),J(b.a,null,Number(s)===Q?J(S.a,{className:"my-2"},J(T.a,{variant:1===+l?"contained":"outlined",size:"small",color:"primary",className:"mr-2 my-2",onClick:function(){return p(1)}},1===+l?"In Progress":"Put in progress"),J(T.a,{variant:"contained",size:"small",color:"primary",className:"bg-success ml-1 my-2",onClick:function(){return p(2)}},2===+l?"Resolved":"Resolve")):null))}),ee=function(e){var t=e.recent,r=e.sendRecent;return J(O.a,{align:"left"},t.map((function(e){return J(D.a,{key:e.id,button:!0,divider:!0,selected:!0,className:e.selected?"bg-danger text-white":"bg-light",align:"right",onClick:function(){return r(e)}},J(_.a,{primary:e.subject,secondary:e.clientName}))})),J(D.a,null,J(d.a,{href:"/posts"},J("a",null," Back to posts"))))},te=function(e){var t=e.relatedissues,r=e.sendRelated;return J(O.a,{align:"left"},t.map((function(e,t){return J(D.a,{key:t,button:!0,divider:!0,selected:!0,className:e.selected?"bg-danger text-white":"bg-light",align:"right",onClick:function(){return r(e.issue)}},J(_.a,{primary:e.issue}),J(j.a,null,e.issuecount))})))}}},[["JbGh",0,1,9,2,3,4,5,6,7,8,14]]]);