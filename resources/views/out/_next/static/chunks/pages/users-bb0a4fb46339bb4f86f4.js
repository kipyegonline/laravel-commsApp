_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{Hdft:function(e,t,n){"use strict";n.r(t);var r=n("ODXe"),a=n("q1tI"),l=n.n(a),u=n("tRbT"),s=n("NrVZ"),i=n("Z3vd"),o=n("/EAt"),c=n("Imu7"),d=n("sRsu"),m=n("3PeG"),p=n("Uf6+"),f=n("R/WZ"),h=n("/MKj"),v=n("7pcq"),b=n("wx14"),g=n("hlFM"),y=(n("tVbE"),n("Spdj"),n("56Ss"),n("nCZa")),w=n("PsDL"),E=n("3Qh7"),j=n("LYUY"),x=Object(j.a)(l.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),O=n("l1im"),N=l.a.createElement;var K=function(e){var t=e.users,n=void 0===t?[]:t,a=e.deleteKey,u=void 0===a?function(e){return e}:a,s=e.editKey,i=void 0===s?function(e){return e}:s,o=l.a.useState(0),c=Object(r.a)(o,2),d=c[0],m=c[1],p=n.length>10?10:n.length,f=Math.ceil(n.length/p),h=d*p,v=d*p+p;return N(l.a.Fragment,null,N("p",{className:"alert alert-info text-center p-1 w-100 my-1"},n.length>0?"".concat(n.length," users"):""),N(_,{users:n.slice(h,v),deleteKey:u,editKey:i,start:h}),n.length>0?N(g.a,null,N(O.a,{color:"primary",count:f,defaultValue:d+1,size:"large",onChange:function(e,t){return m(t-1)}})):null)},_=function(e){var t=e.users,n=void 0===t?[]:t,r=e.deleteKey,a=void 0===r?function(e){return e}:r,l=e.editKey,u=void 0===l?function(e){return e}:l,s=e.start,i=void 0===s?0:s;return N(y.a,null,N(o.a,null,N(c.a,null,N(d.a,null,N(m.a,null,"#"),N(m.a,null,"Name"),N(m.a,null,"Department"),N(m.a,null,"Title"),N(m.a,null,"Email"),N(m.a,null,"Phone"),N(m.a,null,"Edit"),N(m.a,null,"Delete"))),N(p.a,null,n.map((function(e,t){return N(D,Object(b.a)({key:e.id},e,{deleteKey:a,editKey:u,index:t+i}))})))))},k=function(e){var t=e.username,n=e.id,r=(e.department,e.userdept,e.userphone),a=e.useremail,l=e.usertitle,u=e.deleteKey,s=e.editKey,i=e.dept,o=e.index;return N(d.a,null,N(m.a,null,o+1),N(m.a,null,t),N(m.a,null,i),N(m.a,null,l),N(m.a,null,a),N(m.a,null,r),N(m.a,null,N(w.a,{onClick:function(){return s(n)}},N(x,{color:"primary"}))),N(m.a,null,N(w.a,{onClick:function(){return u(n)}},N(E.a,{color:"secondary"}))))},D=l.a.memo(k,(function(e,t){return e.id===t.id})),U=n("L6Je"),S=n("Lv++"),A=n("tm1B"),C=n("5jqn"),L=l.a.createElement,M=Object(f.a)({root:{background:"#fff",padding:".75rem",margin:".75rem auto",width:"30%","@media (max-width:480px)":{background:"#fff",marginBottom:"1rem",flexDirection:"column",width:"100%"},"@media (max-width:768px)":{background:"#fff",marginBottom:"1rem",flexDirection:"column",width:"90%"}},container:{border:"1px solid yellow",width:"100%"}});t.default=function(){var e=M(),t=l.a.useState({}),n=Object(r.a)(t,2),a=n[0],o=n[1],c=l.a.useState(!1),d=Object(r.a)(c,2),m=d[0],p=d[1],f=l.a.useState(!1),b=Object(r.a)(f,2),g=(b[0],b[1]),y=Object(h.b)(),w=function(){Object(S.c)("/users/fetchusers").then((function(e){return y(C.a(e))}))};l.a.useEffect((function(){Promise.all([void Object(S.c)("/departments/fetchdepts").then((function(e){return y(A.a(e))})),w(),Object(S.e)("/users/fetchuserdeptstats",y)])}),[]);var E=Object(h.c)((function(e){return{departments:e.departments.departments,users:e.users.users,tableUsers:e.users.userStats,sectionUsers:e.users.sectionUsers,department:e.users.department}})),j=E.departments,x=E.users,O=E.tableUsers,N=E.sectionUsers,_=E.department,k=function(e,t){return Object(S.b)(e,t,y)};return L(U.a,null,L(u.a,{container:!0,spacing:1,className:"mx-auto my-1",alignItems:"flex-start",direction:"row-reverse",justify:"center",grow:1},L(u.a,{item:!0,md:4,xs:12,className:"".concat(e.root," mt-5"),component:"div"},L(v.c,m?{depts:j,isEditing:m,setEdit:o,Edit:a,title:"Edit User ",url:"./server/users/users.php?edituser=true",updateData:k,closeEditor:function(){return p(!1)}}:{depts:j,isEditing:m,updateData:k,title:"Add User",url:"./server/users/users.php?adduser=true"}),O.length>0?L(P,{users:x,depts:O}):null),L(u.a,{item:!0,md:8,xs:12,className:"".concat(e.root," my-1"),component:"div"},L(u.a,{container:!0},L(u.a,{item:!0}," ",j.length>0?L(v.a,{depts:j,department:_,sendValue:S.f}):null),L(u.a,{item:!0}," ",L(v.b,{getSearch:S.d})),L(u.a,{item:!0},L(s.a,{className:" ml-3 mt-4"},L(i.a,{variant:"outlined",color:"primary",className:" mr-2",size:"small",onClick:w},"See All"),L(i.a,{variant:"contained",color:"primary",size:"small",className:" ml-2",onClick:function(){return p(!1)}},m?"Editing user":"Add User")))),N.length>0?L(K,{users:N,deleteKey:function(e){confirm("Delete user?")&&Object(S.a)(e,y)},editKey:function(e){var t=x.find((function(t){return t.id===e}));t&&(o(t),p(!0),g(!0))}}):null)))};var P=function(e){var t=e.users,n=void 0===t?[]:t,r=e.depts,a=void 0===r?[]:r;return L(o.a,null,L("caption",null,n.length," members from",a.length," departments"),L(c.a,null,L(d.a,null,L(m.a,{scope:"col"},"Department"),L(m.a,{scope:"col"},"Members"))),L(p.a,null,a.map((function(e){return L(z,{key:e.dept,user:e})}))))},z=function(e){var t=e.user,n=void 0===t?[]:t;return L(d.a,null,L(m.a,null,n.dept),L(m.a,null,n.members))}},pgvA:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return n("Hdft")}])}},[["pgvA",0,1,10,2,3,4,5,6,7,9,8,14,13]]]);