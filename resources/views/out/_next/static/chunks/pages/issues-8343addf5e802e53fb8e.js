_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{"27FL":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/issues",function(){return a("dIDr")}])},"7SZd":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),s=(a("17x9"),a("iuhU")),o=a("ofer"),l=a("H2TA"),c=a("4hqb"),u=i.forwardRef((function(e,t){var a=e.children,l=e.classes,u=e.className,d=e.component,m=void 0===d?"div":d,f=e.disablePointerEvents,v=void 0!==f&&f,p=e.disableTypography,h=void 0!==p&&p,g=e.position,b=e.variant,y=Object(r.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),x=Object(c.b)()||{},j=b;return b&&x.variant,x&&!j&&(j=x.variant),i.createElement(c.a.Provider,{value:null},i.createElement(m,Object(n.a)({className:Object(s.a)(l.root,u,v&&l.disablePointerEvents,x.hiddenLabel&&l.hiddenLabel,"filled"===j&&l.filled,{start:l.positionStart,end:l.positionEnd}[g],"dense"===x.margin&&l.marginDense),ref:t},y),"string"!==typeof a||h?a:i.createElement(o.a,{color:"textSecondary"},a)))}));t.a=Object(l.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(u)},bSwy:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=i},dIDr:function(e,t,a){"use strict";a.r(t);var n=a("ODXe"),r=a("q1tI"),i=a.n(r),s=a("EVdn"),o=a.n(s),l=a("vDqi"),c=a.n(l),u=a("7Cbv"),d=a("/MKj"),m=a("tRbT"),f=a("R/WZ"),v=a("hlFM"),p=a("Z3vd"),h=a("ADg1"),g=a("Spdj"),b=a("r9w1"),y=a("eD//"),x=a("tVbE"),j=a("IsqK"),k=a("56Ss"),I=a("3Qh7"),S=a("l1im"),O=a("L6Je"),N=a("t6oH"),w=(a("7pcq"),a("lMTm")),D=a("tm1B"),E=a("9jvC"),C=i.a.createElement,T=Object(f.a)({form:{padding:"1rem",margin:"1rem 0",maxWidth:500,background:"#fff"}}),P=5;var _=function(e){var t=e.sendValue,a=void 0===t?function(e){return e}:t,r=e.userdept,s=void 0===r?{}:r,l=e.sendSelected,c=void 0===l?function(e){return e}:l,d=i.a.useState(""),m=Object(n.a)(d,2),f=m[0],v=m[1],y=i.a.useState(""),x=Object(n.a)(y,2),j=x[0],k=x[1],I=i.a.useState(""),S=Object(n.a)(I,2),O=S[0],N=S[1],w=T(),D=i.a.useRef(null),E=i.a.useRef(null);return C("div",null,C("form",{className:w.form,ref:D,onSubmit:function(e){e.preventDefault(),s.id?f.trimRight().length<5?(k("Please type the issue"),setTimeout((function(){return k("")}),3e3)):f.trimRight().length>4&&s.id.length>0&&(E.current.disabled=!0,a({issue:f,altId:Object(u.a)(),userdept:s.id}),o.a.ajax({url:"./server/issues/issues.php?addissue=true",data:{issue:f,altId:Object(u.a)(),userdept:s.id},type:"POST",dataType:"json"}).then((function(e){if(c(""),200!==e.status)throw new Error(e.msg);N(e.msg),v(""),setTimeout((function(){D.current.reset(),N(""),E.current.disabled=!1}),2e3)})).catch((function(e){E.current.disabled=!1,k(e.message)}))):(k("Please click on the department"),setTimeout((function(){return k("")}),3e3))}},C("p",null,"Add issues for ",s.altName||""," department"),C(h.a,null,C(g.a,{className:"text-danger my-2"},s.altName||""," "),C(b.a,{label:"Add issue(s)",autoFocus:!0,onChange:function(e){return v(e.target.value)},value:f,variant:"outlined"})),C("div",{className:"form-group"},C(g.a,{error:!0,className:"my-1"},j),C(g.a,{className:"my-1 text-success"},O)),C(p.a,{color:"secondary",type:"submit",size:"medium",variant:"contained",ref:E},"Add Issue")))},M=function(e){var t=e.issues,a=void 0===t?[]:t,r=e.deleteId,s=void 0===r?function(e){return e}:r,o=i.a.useState(0),l=Object(n.a)(o,2),c=l[0],u=l[1],d=Math.ceil(a.length/10),m=10*c,f=10*c+10;return C(i.a.Fragment,null,C(y.a,{dense:!0},a.slice(m,f).map((function(e,t){return C(x.a,{key:e.altId,divider:!0,alignItems:"flex-start"},C("small",null,m+t+1),C(j.a,{primary:e.issue,secondary:e.altId}),C(k.a,null,C(I.a,{onClick:function(){return t=e.altId,void(confirm("Delete items?")&&(s(t),fetch("./server/issues/issues.php?deleteissue=true&id=".concat(t)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}))));var t}})))}))),C(S.a,{count:d,defaultValue:c+1,color:"primary",onChange:function(e,t){return u(t-1)},className:"my-2"}))};t.default=function(){var e=Object(d.b)(),t=(T(),i.a.useState({})),a=Object(n.a)(t,2),r=a[0],s=a[1],o=Object(d.c)((function(e){return{issues:e.issues.addedIssues,departments:e.departments.departments}})),l=o.issues,u=o.departments;return i.a.useEffect((function(){c.a.get("./server/issues/issues.php?fetchissues=true").then((function(t){return e(w.b(t.data))})).catch((function(e){return console.log(e,"fetch error")})),e(D.d(P)),e(w.h(P))}),[]),C(O.a,null,C(m.a,{alignItems:"flex-start",container:!0,justify:"space-evenly",spacing:4,direction:"row"},C(m.a,{cols:5,item:!0,component:"div",xs:!0},C(_,{sendValue:function(t){e(w.d(t)),Object(E.b)(t,"issues")},userdept:r})),C(m.a,{item:!0,xs:!0},C(N.b,{depts:u,getDept:function(t){s(t),e(D.d(t.id)),e(w.h(t.id))}})),C(m.a,{item:!0,xs:!0},C(v.a,null,C("small",{className:"alert alert-primary text-center p-2 my-2"},r.department||""),C(M,{issues:l,deleteId:function(t){c.a.get("./server/issues/issues.php?deleteIssue=true&id=".concat(t)),e(w.f(t))}}),u.length?C(p.a,{variant:"outlined",color:"secondary",onClick:function(){return e(w.g())}},"View all issues"):null))))}},iae6:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),s=(a("17x9"),a("iuhU")),o=a("H2TA"),l=a("NqtD");function c(e){var t,a,n;return t=e,a=0,n=1,e=(Math.min(Math.max(a,t),n)-a)/(n-a),e=(e-=1)*e*e+1}var u=i.forwardRef((function(e,t){var a,o=e.classes,u=e.className,d=e.color,m=void 0===d?"primary":d,f=e.disableShrink,v=void 0!==f&&f,p=e.size,h=void 0===p?40:p,g=e.style,b=e.thickness,y=void 0===b?3.6:b,x=e.value,j=void 0===x?0:x,k=e.variant,I=void 0===k?"indeterminate":k,S=Object(r.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),O={},N={},w={};if("determinate"===I||"static"===I){var D=2*Math.PI*((44-y)/2);O.strokeDasharray=D.toFixed(3),w["aria-valuenow"]=Math.round(j),"static"===I?(O.strokeDashoffset="".concat(((100-j)/100*D).toFixed(3),"px"),N.transform="rotate(-90deg)"):(O.strokeDashoffset="".concat((a=(100-j)/100,a*a*D).toFixed(3),"px"),N.transform="rotate(".concat((270*c(j/70)).toFixed(3),"deg)"))}return i.createElement("div",Object(n.a)({className:Object(s.a)(o.root,u,"inherit"!==m&&o["color".concat(Object(l.a)(m))],{indeterminate:o.indeterminate,static:o.static}[I]),style:Object(n.a)(Object(n.a)({width:h,height:h},N),g),ref:t,role:"progressbar"},w,S),i.createElement("svg",{className:o.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},i.createElement("circle",{className:Object(s.a)(o.circle,v&&o.circleDisableShrink,{indeterminate:o.circleIndeterminate,static:o.circleStatic}[I]),style:O,cx:44,cy:44,r:(44-y)/2,fill:"none",strokeWidth:y})))}));t.a=Object(o.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(u)},t6oH:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"c",(function(){return x})),a.d(t,"a",(function(){return j}));var n=a("ODXe"),r=a("q1tI"),i=a.n(r),s=a("ADg1"),o=a("1AYd"),l=a("cVXz"),c=a("jjAL"),u=a("ofer"),d=a("eD//"),m=a("tVbE"),f=a("IsqK"),v=(a("pdwK"),a("R/WZ")),p=a("l1im"),h=i.a.createElement,g=Object(v.a)({formControl:{width:"80%",margin:".5rem auto"}}),b=20;t.d=function(e){var t=e.issues,a=void 0===t?[]:t,r=e.getIssue,u=void 0===r?function(e){return e}:r,d=e.issue,m=void 0===d?"":d,f=e.multiple,v=void 0!==f&&f,p=i.a.useState(!0),b=Object(n.a)(p,2),y=b[0],x=b[1],j=g();return h(s.a,{className:j.formControl},h(o.a,{id:"issues-at-hand"},"Select Issue"),h(l.a,{labelId:"issues-at-hand",id:"issues-at-hand",value:m,variant:"filled",error:y,multiple:v,onChange:function(e){v?e.target.value.includes("")||(u(e.target.value),x(!1)):e.target.value.length>0&&(u(e.target.value),x(!1))}},h(c.a,{value:""},h("em",null,"Select Issue")),a.map((function(e){return h(c.a,{key:e.altId,value:e.id}," ",e.issue)}))))};var y=function(e){var t=e.depts,a=void 0===t?[]:t,r=e.getDept,s=void 0===r?function(e){return e}:r,o=i.a.useState(0),l=Object(n.a)(o,2),c=l[0],v=l[1],g=Math.ceil(a.length/10),b=10*c,y=10*c+10;return h(i.a.Fragment,null,h(u.a,{className:"mx-auto text-center alert alert-info my-2"},a.length," departments"),h(d.a,null,a.slice(b,y).map((function(e,t){return h(m.a,{key:e.id,dense:!0,alignItems:"center",selected:!0,className:e.selected?"bg-danger text-white":"bg-light",divider:!0,button:!0,onClick:function(){return s(e)}},h("small",{className:"mr-2"},b+t+1,". ")," ",h(f.a,{primary:e.department}))}))),a.length>10?h(p.a,{count:g,defaultValue:c+1,color:"primary",onChange:function(e,t){return v(t-1)},className:"my-2"}):null)},x=function(e){var t=e.users,a=void 0===t?[]:t,n=e.getUser,r=void 0===n?function(e){return e}:n;return h(d.a,{dense:!0},a.map((function(e,t){return h(m.a,{key:e.id,alignItems:"center",divider:!0,button:!0,onClick:function(){return r(e)},className:e.selected?"bg-info text-white":"bg-light",variant:"contained",color:"secondary"},h("small",{className:"mr-2"},t+1,". ")," ",h(f.a,{primary:e.username,secondary:e.usertitle+" - "+e.userphone}))})))};function j(e){var t=e.users,a=void 0===t?[]:t,r=e.getUser,u=void 0===r?function(e){return e}:r,d=e.user,m=void 0===d?"":d,f=e.multiple,v=void 0!==f&&f,p=i.a.useState(!0),y=Object(n.a)(p,2),x=y[0],j=y[1],k=g();return h(s.a,{className:k.formControl},h(o.a,{id:"user-at-hand"},"Select Colleauge"),h(l.a,{labelId:"user-at-hand",id:"issues-at-hand",value:m,variant:"filled",error:x,multiple:v,onChange:function(e){e.target.value.length>0&&(u(e.target.value),j(!1))}},h(c.a,{value:""},h("em",null,"Select Colleauge")),a.filter((function(e){return+e.id!==b})).map((function(e){return h(c.a,{key:e.altId,value:e.id},e.username)}))))}}},[["27FL",0,1,9,2,3,4,5,6,7,8,10,11,15]]]);